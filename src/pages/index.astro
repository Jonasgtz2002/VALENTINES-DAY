---
const base = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL : import.meta.env.BASE_URL + '/';
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href={`${base}favicon.svg`} />
    <meta name="viewport" content="width=device-width" />
    <title>üíù ¬øQuieres ser mi San Valent√≠n? üíù</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  </head>
  <body>
    <div class="hearts-bg" id="hearts-bg"></div>

    <div class="container">
      <h1 class="pixel-title">üíù San Valent√≠n 2026 üíù</h1>

      <!-- Contador -->
      <div class="countdown-box">
        <div class="countdown-label">‚è∞ D√≠as para el 14 de Febrero</div>
        <div class="countdown-number" id="countdown">--</div>
      </div>

      <!-- Calendario -->
      <div class="calendar-container">
        <div class="calendar-header">üìÖ Febrero 2026 üìÖ</div>
        <div class="calendar">
          <div class="calendar-days-header">
            <div class="day-header">Dom</div>
            <div class="day-header">Lun</div>
            <div class="day-header">Mar</div>
            <div class="day-header">Mi√©</div>
            <div class="day-header">Jue</div>
            <div class="day-header">Vie</div>
            <div class="day-header">S√°b</div>
          </div>
          <div class="calendar-days">
            <div class="day">1</div>
            <div class="day">2</div>
            <div class="day">3</div>
            <div class="day">4</div>
            <div class="day">5</div>
            <div class="day">6</div>
            <div class="day">7</div>
            <div class="day">8</div>
            <div class="day">9</div>
            <div class="day">10</div>
            <div class="day">11</div>
            <div class="day">12</div>
            <div class="day">13</div>
            <div class="day valentine-day">14 üíù</div>
            <div class="day">15</div>
            <div class="day">16</div>
            <div class="day">17</div>
            <div class="day">18</div>
            <div class="day">19</div>
            <div class="day">20</div>
            <div class="day">21</div>
            <div class="day">22</div>
            <div class="day">23</div>
            <div class="day">24</div>
            <div class="day">25</div>
            <div class="day">26</div>
            <div class="day">27</div>
            <div class="day">28</div>
          </div>
        </div>
      </div>

      <!-- Foto -->
      <div class="photo-frame">
        <img id="couple-photo" src={`${base}juntos.jpeg`} alt="Nuestra foto" class="couple-photo" />
      </div>

      <!-- Pregunta -->
      <div class="question-box">
        <h2 class="question">Mi vida hermosa y preciosa, te amo tanto... üíï</h2>
        <p class="question-subtitle">¬øTe casar√≠as conmigo, por favor? üíç</p>
        <p class="question-extra">Mientras tanto... ¬øte gustar√≠a ser mi San Valent√≠n? üòä‚ù§Ô∏è</p>
      </div>

      <!-- Botones -->
      <div class="buttons-container" id="buttons-container">
        <button id="yes-btn" class="btn btn-yes">‚ú® ¬°S√ç! ‚ú®</button>
        <button id="no-btn" class="btn btn-no">No...</button>
      </div>

      <!-- Mensaje de √©xito -->
      <div id="success-message" style="display:none;">
        <div class="success-message">
          <h2>üéâ ¬°Sab√≠a que dir√≠as que s√≠! üéâ</h2>
          <p>¬°jijijiji te quelo muchisimo!</p>
          <div class="pixel-heart">‚ù§Ô∏è</div>
        </div>
      </div>

      <!-- Regalo -->
      <div class="gift-section">
        <h3 class="gift-title">üéÅ Tengo algo para ti üéÅ</h3>
        <button id="gift-btn" class="gift-box">
          <span class="gift-emoji">üéÅ</span>
          <span class="gift-text">¬°Click aqu√≠!</span>
        </button>
      </div>
    </div>

    <!-- Modal del regalo (FUERA del container) -->
    <div id="gift-modal" style="display:none;">
      <div class="modal-overlay" id="modal-overlay">
        <div class="modal-content">
          <button id="close-modal" class="close-btn" type="button">‚úï</button>
          <h3 class="modal-title">üéÅ Tu Regalo Especial üéÅ</h3>
          <div class="gift-image-container">
            <img src={`${base}gift.PNG`} alt="Tu regalo" class="gift-image" />
          </div>
          <p class="gift-message">¬°Espero que te guste! üíù</p>
        </div>
      </div>
    </div>

    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }

      body {
        font-family: 'Press Start 2P', cursive;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #feca57 100%);
        background-size: 400% 400%;
        animation: gradientShift 15s ease infinite;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow-x: hidden;
        padding: 20px;
      }

      @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      .hearts-bg {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
      }

      .floating-heart {
        position: absolute;
        font-size: 24px;
        animation: floatUp linear infinite;
        opacity: 0.4;
      }

      @keyframes floatUp {
        0% { transform: translateY(100vh) rotate(0deg); opacity: 0.4; }
        100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
      }

      .container {
        position: relative;
        z-index: 2;
        background: rgba(255, 255, 255, 0.95);
        border: 8px solid #333;
        border-radius: 20px;
        padding: 40px;
        max-width: 600px;
        width: 100%;
        box-shadow:
          0 0 0 4px #fff,
          0 0 0 8px #333,
          0 20px 60px rgba(0,0,0,0.5),
          inset 0 0 50px rgba(255,182,193,0.3);
        text-align: center;
      }

      .pixel-title {
        font-size: clamp(16px, 4vw, 24px);
        color: #e91e63;
        text-shadow: 4px 4px 0 #ffc0cb, -2px -2px 0 #ff1744;
        margin-bottom: 30px;
        animation: bounce 2s ease-in-out infinite;
      }

      @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }

      /* Countdown */
      .countdown-box {
        background: linear-gradient(135deg, #ffd700, #ffa500);
        border: 6px solid #333;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 25px;
        box-shadow: 0 0 0 3px #fff, 0 0 0 6px #333;
      }

      .countdown-label {
        font-size: clamp(10px, 2vw, 12px);
        color: #333;
        margin-bottom: 10px;
      }

      .countdown-number {
        font-size: clamp(40px, 8vw, 60px);
        color: #fff;
        text-shadow: 4px 4px 0 #333;
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
      }

      /* Calendar */
      .calendar-container {
        margin-bottom: 30px;
        background: rgba(255,255,255,0.9);
        border: 6px solid #333;
        border-radius: 15px;
        padding: 20px;
      }

      .calendar-header {
        font-size: clamp(12px, 2.5vw, 16px);
        color: #e91e63;
        margin-bottom: 15px;
        text-shadow: 2px 2px 0 #ffc0cb;
      }

      .calendar {
        background: #fff;
        border: 4px solid #ff69b4;
        border-radius: 10px;
        padding: 15px;
      }

      .calendar-days-header, .calendar-days {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 8px;
      }

      .calendar-days-header { margin-bottom: 10px; }

      .day-header {
        font-size: clamp(8px, 1.5vw, 10px);
        color: #e91e63;
        text-align: center;
        padding: 5px;
        background: rgba(255,182,193,0.3);
        border-radius: 5px;
      }

      .day {
        font-size: clamp(10px, 2vw, 14px);
        text-align: center;
        padding: 10px 5px;
        background: #f0f0f0;
        border: 2px solid #ddd;
        border-radius: 8px;
        color: #333;
      }

      .valentine-day {
        background: linear-gradient(135deg, #ff1744, #f50057);
        color: #fff;
        border: 3px solid #333;
        font-weight: bold;
        box-shadow: 0 0 0 2px #ffd700, 0 0 20px rgba(255,23,68,0.6);
        animation: valentineGlow 2s ease-in-out infinite;
        transform: scale(1.1);
      }

      @keyframes valentineGlow {
        0%, 100% { box-shadow: 0 0 0 2px #ffd700, 0 0 20px rgba(255,23,68,0.6); }
        50% { box-shadow: 0 0 0 2px #fff, 0 0 30px rgba(255,23,68,0.9); }
      }

      /* Photo */
      .photo-frame {
        width: 250px;
        height: 250px;
        margin: 0 auto 30px;
        border: 8px solid #ff1744;
        border-radius: 15px;
        box-shadow: 0 0 0 4px #ffc0cb, 0 0 0 8px #333;
        overflow: hidden;
        background: linear-gradient(135deg, #ffc0cb, #ffb6c1);
      }

      .couple-photo {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      /* Question */
      .question-box {
        background: linear-gradient(135deg, #ff6b9d, #c44569);
        border: 4px solid #333;
        border-radius: 10px;
        padding: 25px;
        margin-bottom: 30px;
      }

      .question {
        font-size: clamp(14px, 3vw, 18px);
        color: #fff;
        text-shadow: 3px 3px 0 #333;
        line-height: 1.6;
        margin-bottom: 15px;
      }

      .question-subtitle {
        font-size: clamp(12px, 2.5vw, 16px);
        color: #fff;
        text-shadow: 2px 2px 0 #333;
        margin: 15px 0;
        line-height: 1.8;
      }

      .question-extra {
        font-size: clamp(10px, 2vw, 14px);
        color: #fff;
        text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
        margin-top: 15px;
        line-height: 1.8;
      }

      /* Buttons */
      .buttons-container {
        display: flex;
        gap: 20px;
        justify-content: center;
        margin-bottom: 40px;
        flex-wrap: wrap;
        min-height: 80px;
        align-items: center;
        position: relative;
      }

      .btn {
        font-family: 'Press Start 2P', cursive;
        font-size: clamp(12px, 2.5vw, 16px);
        padding: 20px 40px;
        border: 4px solid #333;
        border-radius: 10px;
        cursor: pointer;
        box-shadow: 0 6px 0 #333;
      }

      .btn:active {
        transform: translateY(4px);
        box-shadow: 0 2px 0 #333;
      }

      .btn-yes {
        background: linear-gradient(135deg, #4ade80, #22c55e);
        color: #fff;
        text-shadow: 2px 2px 0 #166534;
      }

      .btn-yes:hover {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        transform: scale(1.1);
      }

      .btn-no {
        background: linear-gradient(135deg, #f87171, #ef4444);
        color: #fff;
        text-shadow: 2px 2px 0 #7f1d1d;
      }

      /* Success */
      .success-message {
        background: linear-gradient(135deg, #4ade80, #22c55e);
        border: 4px solid #333;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        animation: celebration 0.5s ease-in-out;
      }

      .success-message h2 {
        font-size: clamp(14px, 3vw, 20px);
        color: #fff;
        text-shadow: 3px 3px 0 #166534;
        margin-bottom: 15px;
      }

      .success-message p {
        font-size: clamp(10px, 2vw, 14px);
        color: #fff;
        text-shadow: 2px 2px 0 #166534;
      }

      .pixel-heart {
        font-size: 50px;
        margin-top: 15px;
        animation: heartbeat 1s ease-in-out infinite;
      }

      @keyframes celebration {
        0%, 100% { transform: rotate(0deg) scale(1); }
        25% { transform: rotate(-5deg) scale(1.05); }
        75% { transform: rotate(5deg) scale(1.05); }
      }

      @keyframes heartbeat {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.2); }
      }

      /* Gift */
      .gift-section {
        margin-top: 40px;
        padding-top: 30px;
        border-top: 4px dashed #e91e63;
      }

      .gift-title {
        font-size: clamp(12px, 2.5vw, 16px);
        color: #e91e63;
        margin-bottom: 20px;
        text-shadow: 2px 2px 0 #ffc0cb;
      }

      .gift-box {
        font-family: 'Press Start 2P', cursive;
        background: linear-gradient(135deg, #ffd700, #ffed4e, #ffd700);
        border: 4px solid #333;
        border-radius: 15px;
        padding: 30px 50px;
        font-size: clamp(14px, 3vw, 18px);
        cursor: pointer;
        box-shadow: 0 8px 0 #b8860b;
        animation: giftSway 2s ease-in-out infinite;
      }

      .gift-box:hover { transform: scale(1.1) translateY(-5px); }
      .gift-box:active { transform: translateY(6px); box-shadow: 0 2px 0 #b8860b; }

      @keyframes giftSway {
        0%, 100% { transform: rotate(-2deg); }
        50% { transform: rotate(2deg); }
      }

      .gift-emoji { font-size: 40px; display: block; margin-bottom: 10px; }
      .gift-text { color: #333; }

      /* Modal */
      .modal-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 20px;
      }

      .modal-content {
        background: #fff;
        border: 8px solid #333;
        border-radius: 20px;
        padding: 40px;
        max-width: 500px;
        width: 90%;
        position: relative;
        box-shadow: 0 0 0 4px #ffd700, 0 0 0 8px #333;
        animation: modalAppear 0.3s ease-out;
      }

      @keyframes modalAppear {
        from { transform: scale(0.5) rotate(-10deg); opacity: 0; }
        to { transform: scale(1) rotate(0deg); opacity: 1; }
      }

      .close-btn {
        position: absolute;
        top: 10px; right: 10px;
        background: #ef4444;
        color: #fff;
        border: 3px solid #333;
        border-radius: 50%;
        width: 40px; height: 40px;
        font-size: 18px;
        cursor: pointer;
        font-family: 'Press Start 2P', cursive;
        box-shadow: 0 4px 0 #7f1d1d;
        z-index: 1001;
        display: flex;
        align-items: center;
        justify-content: center;
        line-height: 1;
      }

      .close-btn:hover { transform: scale(1.1); }
      .close-btn:active { transform: translateY(3px); box-shadow: 0 1px 0 #7f1d1d; }

      .modal-title {
        font-size: clamp(14px, 3vw, 18px);
        color: #e91e63;
        margin-bottom: 25px;
        text-shadow: 2px 2px 0 #ffc0cb;
      }

      .gift-image-container {
        width: 100%;
        max-height: 400px;
        margin: 0 auto 25px;
        border: 6px solid #ffd700;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 0 0 3px #333;
        background: linear-gradient(135deg, #ffd700, #ffed4e);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .gift-image {
        width: 100%;
        max-height: 400px;
        object-fit: contain;
        display: block;
      }

      .gift-message {
        font-size: clamp(10px, 2vw, 14px);
        color: #e91e63;
        text-shadow: 1px 1px 0 #ffc0cb;
        line-height: 1.6;
      }

      @media (max-width: 600px) {
        .container { padding: 20px; }
        .photo-frame { width: 200px; height: 200px; }
        .btn { padding: 15px 30px; }
        .gift-box { padding: 20px 30px; }
        .modal-content { padding: 25px; }
      }
    </style>

    <script>
      // === ELEMENTS ===
      const noBtn = document.getElementById('no-btn') as HTMLButtonElement;
      const yesBtn = document.getElementById('yes-btn') as HTMLButtonElement;
      const successMsg = document.getElementById('success-message') as HTMLElement;
      const giftBtn = document.getElementById('gift-btn') as HTMLButtonElement;
      const giftModal = document.getElementById('gift-modal') as HTMLElement;
      const closeModalBtn = document.getElementById('close-modal') as HTMLButtonElement;
      const modalOverlay = document.getElementById('modal-overlay') as HTMLElement;
      const btnContainer = document.getElementById('buttons-container') as HTMLElement;
      const countdownEl = document.getElementById('countdown') as HTMLElement;

      // === FLOATING HEARTS ===
      const heartsBg = document.getElementById('hearts-bg')!;
      const heartEmojis = ['üíï', 'üíñ', 'üíù', '‚ù§Ô∏è', 'üíó', 'üíì', 'üíû'];
      for (let i = 0; i < 15; i++) {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDuration = (Math.random() * 6 + 6) + 's';
        heart.style.animationDelay = (Math.random() * 10) + 's';
        heart.style.fontSize = (Math.random() * 20 + 16) + 'px';
        heartsBg.appendChild(heart);
      }

      // === COUNTDOWN ===
      function updateCountdown() {
        const today = new Date();
        const year = today.getFullYear();
        let vday = new Date(year, 1, 14);
        if (today > vday) vday = new Date(year + 1, 1, 14);
        const diff = Math.ceil((vday.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));
        countdownEl.textContent = diff === 0 ? '¬°HOY! üíù' : diff.toString();
      }
      updateCountdown();
      setInterval(updateCountdown, 60000);

      // === NO BUTTON RUNS AWAY ===
      function moveNoButton(e: MouseEvent) {
        const rect = noBtn.getBoundingClientRect();
        const cx = rect.left + rect.width / 2;
        const cy = rect.top + rect.height / 2;
        const dist = Math.sqrt(Math.pow(e.clientX - cx, 2) + Math.pow(e.clientY - cy, 2));
        if (dist < 150) {
          const maxX = window.innerWidth - rect.width - 20;
          const maxY = window.innerHeight - rect.height - 20;
          noBtn.style.position = 'fixed';
          noBtn.style.left = (Math.random() * maxX) + 'px';
          noBtn.style.top = (Math.random() * maxY) + 'px';
          noBtn.style.transition = 'all 0.3s ease';
          noBtn.style.zIndex = '999';
        }
      }
      document.addEventListener('mousemove', moveNoButton);
      noBtn.addEventListener('click', (e) => { e.preventDefault(); moveNoButton(e); });

      // === YES BUTTON ===
      yesBtn.addEventListener('click', () => {
        successMsg.style.display = 'block';
        btnContainer.style.display = 'none';
        // Confetti
        const emojis = ['üíï', 'üíñ', 'üíù', '‚ù§Ô∏è', 'üíó', 'üéâ', '‚ú®', '‚≠ê'];
        for (let i = 0; i < 50; i++) {
          const c = document.createElement('div');
          c.textContent = emojis[Math.floor(Math.random() * emojis.length)];
          c.style.cssText = `position:fixed;left:${Math.random()*100}%;top:-50px;font-size:${Math.random()*20+20}px;z-index:9999;pointer-events:none;animation:confettiFall ${Math.random()*3+2}s linear forwards;`;
          document.body.appendChild(c);
          setTimeout(() => c.remove(), 5000);
        }
      });

      // Add confetti animation
      const confettiStyle = document.createElement('style');
      confettiStyle.textContent = '@keyframes confettiFall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }';
      document.head.appendChild(confettiStyle);

      // === GIFT MODAL ===
      giftBtn.addEventListener('click', () => {
        giftModal.style.display = 'block';
      });

      closeModalBtn.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        giftModal.style.display = 'none';
      });

      modalOverlay.addEventListener('click', (e) => {
        if (e.target === modalOverlay) {
          giftModal.style.display = 'none';
        }
      });
    </script>
  </body>
</html>
